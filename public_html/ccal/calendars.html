<!DOCTYPE html>

  <head>
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <title>Crimson Calendar: Harvard Calendars</title>
  
      <script type="text/javascript">
        function init() {
        
        // initialize new AJAX object
        var xhr = new XMLHttpRequest();
        
        
        // prep the URL string
        var url = "http://events.cs50.net/api/1.0/calendars?output=json";
       
       
        // event handler
        xhr.onreadystatechange = function() {
            
            // ensure that request did not fail
        if (xhr.readyState == 4 && xhr.status == 200)
        { 
          // interpret response
          var calendars = new Array();
          calendars = eval(xhr.responseText);
          
          //display calendar
          for(var i in calendars)
          {
              document.getElementById("list").innerHTML = document.getElementById("list").innerHTML + (calendars[i])['calname']+ "<br>" ;
              document.getElementById("error").innerHTML = null;
          }
                
        }
             //error check
        else if (xhr.readyState == 4 && xhr.status != 200)
              document.getElementById("error").innerHTML = "Error: Could not access CS 50 Events API";
           
             

             
        }
    
        //send request
        xhr.open("GET", url, true);
        xhr.send();
        }
      </script>
  </head>

  <body onload="init()">

    <div class="logo">
      <a href="index.php"><img id ="logo" src="extras/harvard-logo.jpg" alt="Crimson Calendar"><h1 class="logo_text">Crimson Calendar</h1></a>
    </div>
    
    <div class="border_hor"></div>
    <div class="border_ver"></div>

    <div class="links">
      <h1><a class="link_box" href= "index.php"> Home </a>
      <a class="link_box" href= "events.html"> Events </a>
      <a class="active_link_box" href= "calendars.html"> Calendars </a>
      <a class="link_box" href= "doodle_tool.html"> Doodle Tool </a>
      </h1>
    </div>

    <div class="body">
      <div class="title">
        <h2>Harvard Calendars</h2>
      </div>

      <div id='error'>
      </div>
    
      <div class="events_text" id="list">
      </div>
    </div>
  </body>
</html>